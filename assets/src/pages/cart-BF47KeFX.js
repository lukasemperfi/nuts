import{C as h,s as c,g as r,Q as y,f as u,i as p,a as f,b,l as _}from"../../footer-kwW1Dzn6.js";const C=async()=>{const o=[{key:"productName",label:"Товар",type:"text",width:"max-content",align:"left"},{key:"quantity",label:"Кол-во",type:"component",render:t=>new y(t.quantity,t.id).element,width:"max-content"},{key:"price",label:"Цена за товар",type:"currency",width:"max-content",render:t=>u(t.price,"грн.")},{key:"total",label:"Итоговая стоимость",type:"currency",width:"max-content",render:t=>u(t.total,"грн.")}],m={leftAction:{type:"button",text:"Продолжить покупки",icon:"back",className:"button_secondary button_size-sm",href:`${r}catalog/`},rightGroup:[{type:"total",text:"Всего",amountKey:"totalAmount",unit:"грн."},{type:"button",text:"Оформить заказ",className:"button_primary button_size-lg order-link",href:`${r}checkout/`}]},e=document.querySelector(".cart-section__page-container"),l=document.getElementById("loader-spinner");try{h({container:e,columns:o,footer:m,onChange:()=>{const n=e.querySelector(".order-link");c.subscribe("auth",i=>{i.isAuth?n&&n.classList.remove("disabled-link"):n&&n.classList.add("disabled-link")})}});let t=null;c.subscribe("auth",n=>{const i=n.isAuth,a=e.querySelector(".auth-item");if(t=i,i)a&&e.removeChild(a);else if(!a){const s=d();e.appendChild(s)}}),c.subscribe("cart",n=>{const i=n.items.length===0,a=e.querySelector(".auth-item");if(i)a&&e.removeChild(a);else if(!a&&!t){const s=d();e.appendChild(s)}})}catch(t){console.error("Ошибка при инициализации корзины:",t)}finally{l&&l.classList.add("hidden"),e&&e.classList.remove("hidden")}};function d(){const o=document.createElement("div");return o.className="auth-item",o.innerHTML=`
      <div class="auth-item__title">Для оформления заказа необходимо</div>
      <div class="auth-item__links">
          <a href="${r}login/" class="auth-item__link">Авторизоваться</a>
          или 
          <a href="${r}registration/" class="auth-item__link">Зарегистрироваться</a>
      </div>
  `,o}document.addEventListener("DOMContentLoaded",async()=>{p({selector:".top-header__lang"}),f(),C(),b(),_(".lazy",{rootMargin:"200px 0px"})});
