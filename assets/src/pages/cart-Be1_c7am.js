import{T as b,g as w,s as u,h as f,m as h,Q as g,i as _,a as C,b as T,l as A}from"../../footer-CND1tpeV.js";function q({container:e}){const c=[{key:"productName",label:"Товар",type:"text",width:"1fr",align:"left"},{key:"quantity",label:"Кол-во",type:"component",render:t=>new g(t.quantity,t.id).element,width:"1fr"},{key:"price",label:"Цена",type:"currency",width:"1fr"},{key:"total",label:"Итоговая стоимость",type:"currency",width:"0.5fr",align:"left",render:t=>x(t.total,"грн.")}],n={leftAction:{type:"button",text:"Продолжить покупки",icon:"back",className:"button_secondary button_size-sm",href:"/catalog/"},rightGroup:[{type:"total",text:"Всего",amountKey:"totalAmount",unit:"грн."},{type:"button",text:"Оформить заказ",className:"button_primary button_size-lg",href:"/checkout/"}]},r=[],o=new b(r),d={columns:c,rows:o.getRows(),totalAmount:o.calculateTotalAmount(),footer:n,showHeader:!0},m=new w(e,d);e.addEventListener("dataUpdateRequest",t=>{const{action:a,itemId:s,newQuantity:i}=t.detail;a==="updateQuantity"&&u.dispatch({type:"cart/setQuantity",payload:{productId:String(s),quantity:i}})}),u.subscribe("cart",async t=>{const a=t.items,s=a.map(y=>String(y.productId)),i=await f(s),l=h(i,a);o.setRows(l);const p=o.calculateTotalAmount();m.update({rows:l,totalAmount:p})})}function x(e,c){const n=document.createElement("div");n.classList.add("currency-cell");const r=Number(e).toFixed(2);return n.innerHTML=`
      <span class="currency-cell__amount">${r}</span>
      <span class="currency-cell__unit">${c}</span>
  `,n}const k=()=>{const e=document.querySelector(".cart-section__page-container");q({container:e})};document.addEventListener("DOMContentLoaded",async()=>{_({selector:".top-header__lang"}),C(),k(),T(),A(".lazy",{rootMargin:"200px 0px"})});
