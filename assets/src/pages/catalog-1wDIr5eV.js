import{i as h,N as v,a as _,b,c as L,l as S}from"../../footer-DstHgzxW.js";import{s as u,a as f,f as y}from"../../product-list-CM3b1e0B.js";import{i as F}from"../../breadcrumbs-CHzDZe8L.js";const P=()=>{E()};function E(){return h(".walnut-slider",{slidesPerView:"auto",navigation:{nextEl:".walnut-slider__next",prevEl:".walnut-slider__prev"},modules:[v]})}const B=()=>{let t={weight:[],flavor:[],sort:null};a(),u.dispatch(f.setFilters(t)),u.dispatch(f.setInitialized(!0));function r(e,o){if(e==="sort"){t.sort=o,console.log(t);return}const c=t[e];c.includes(o)?t[e]=c.filter(m=>m!==o):t[e].push(o),console.log(t)}function i(){t.weight=[],t.flavor=[],t.sort=null,l(),u.dispatch(f.resetFilters()),console.log("Фильтры сброшены:",t)}function s(){const e=new URLSearchParams;t.weight.forEach(c=>e.append("weight",c)),t.flavor.forEach(c=>e.append("flavor",c)),t.sort&&e.set("sort",t.sort);const o=window.location.pathname+(e.toString()?`?${e.toString()}`:"");window.history.replaceState({},"",o)}function l(){const e=window.location.pathname;window.history.replaceState({},"",e),console.log("Фильтры сброшены:",t)}function a(){const e=new URLSearchParams(window.location.search);t.weight=e.getAll("weight"),t.flavor=e.getAll("flavor"),t.sort=e.get("sort")||null}const n=_({selector:".product-filters-bar__flavor-select",onChange:(e,o)=>r(e,o),defaultValues:[...t.flavor]}),d=_({selector:".product-filters-bar__weight-select",onChange:(e,o)=>r(e,o),defaultValues:[...t.weight]}),w=g({selector:".filter-btn_price-desktop",onClick:(e,o)=>r(e,o),defaultValue:t.sort}),p=g({selector:".filter-btn_price-mobile",onClick:(e,o)=>r(e,o),defaultValue:t.sort});k({selector:".filter-actions__apply-btn",onClick:()=>{s(),u.dispatch(f.setFilters(t)),console.log("Applied filters:",t)}}),U({selector:".filter-actions__reset-btn",onClick:()=>{n.reset(),d.reset(),w.reset(),p.reset(),i()}})},g=({selector:t,defaultValue:r,onClick:i})=>{const s=document.querySelector(t);if(!s)return;const l=s.querySelector(".filter-btn__icon_arrowUp"),a=s.querySelector(".filter-btn__icon_arrowDown");let n=r||null;const d=()=>{n==="asc"?(l.classList.add("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active")):n==="desc"?(a.classList.add("filter-btn__icon_active"),l.classList.remove("filter-btn__icon_active")):(l.classList.remove("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active"))};return d(),s.addEventListener("click",()=>{if(n=n==="asc"?"desc":"asc",d(),i){const p=s.dataset.name;i(p,n)}}),{reset:()=>{n=null,d()}}},U=({selector:t,onClick:r})=>{const i=document.querySelector(t);i&&i.addEventListener("click",()=>{r&&r()})},k=({selector:t,onClick:r})=>{const i=document.querySelector(t);i&&i.addEventListener("click",()=>{r&&r()})},A=()=>{B(),y(".products__catalog")},R=()=>{F(".hero__breadcrumbs .page-container")};document.addEventListener("DOMContentLoaded",()=>{b(),_({selector:".top-header__lang"}),R(),P(),A(),L(),S(".lazy",{rootMargin:"200px 0px"})});
