import{i as g,N as h,s as v,a as f}from"../../navigation-BeniYUDe.js";const m=()=>{b()};function b(){return g(".walnut-slider",{slidesPerView:"auto",navigation:{nextEl:".walnut-slider__next",prevEl:".walnut-slider__prev"},modules:[h]})}const L=()=>{let e={weight:[],flavor:[],price:null};a(),v.dispatch({type:"productFilters/setFilters",payload:{...e}});function n(t,i){if(t==="price"){e.price=i,r(),console.log(e);return}const s=e[t];s.includes(i)?e[t]=s.filter(w=>w!==i):e[t].push(i),r(),console.log(e)}function c(){e.weight=[],e.flavor=[],e.price=null,l()}function r(){const t=new URLSearchParams;e.weight.forEach(s=>t.append("weight",s)),e.flavor.forEach(s=>t.append("flavor",s)),e.price&&t.set("price",e.price);const i=window.location.pathname+(t.toString()?`?${t.toString()}`:"");window.history.replaceState({},"",i)}function l(){const t=window.location.pathname;window.history.replaceState({},"",t),console.log("Фильтры сброшены:",e)}function a(){const t=new URLSearchParams(window.location.search);e.weight=t.getAll("weight"),e.flavor=t.getAll("flavor"),e.price=t.get("price")||null}const o=f({selector:".product-filters-bar__flavor-select",onChange:(t,i)=>n(t,i),defaultValues:[...e.flavor]}),u=f({selector:".product-filters-bar__weight-select",onChange:(t,i)=>n(t,i),defaultValues:[...e.weight]}),p=_({selector:".filter-btn_price-desktop",onClick:(t,i)=>n(t,i),defaultValue:e.price}),d=_({selector:".filter-btn_price-mobile",onClick:(t,i)=>n(t,i),defaultValue:e.price});S({selector:".filter-actions__reset-btn",onClick:()=>{o.reset(),u.reset(),p.reset(),d.reset(),c(),console.log(e)}})},_=({selector:e,defaultValue:n,onClick:c})=>{const r=document.querySelector(e);if(!r)return;const l=r.querySelector(".filter-btn__icon_arrowUp"),a=r.querySelector(".filter-btn__icon_arrowDown");let o=n||null;const u=()=>{o==="asc"?(l.classList.add("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active")):o==="desc"?(a.classList.add("filter-btn__icon_active"),l.classList.remove("filter-btn__icon_active")):(l.classList.remove("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active"))};return u(),r.addEventListener("click",()=>{if(o=o==="asc"?"desc":"asc",u(),c){const d=r.dataset.name;c(d,o)}}),{reset:()=>{o=null,u()}}},S=({selector:e,onClick:n})=>{const c=document.querySelector(e);c&&c.addEventListener("click",()=>{n&&n()})},P=()=>{L()};document.addEventListener("DOMContentLoaded",()=>{f({selector:".top-header__lang"}),m(),P()});
