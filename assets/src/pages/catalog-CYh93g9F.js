import{i as w,N as g,s as _,p,a as m,l as v}from"../../lazy-loading-Cdf_PlSD.js";const L=()=>{S()};function S(){return w(".walnut-slider",{slidesPerView:"auto",navigation:{nextEl:".walnut-slider__next",prevEl:".walnut-slider__prev"},modules:[g]})}const k=()=>{let t={weight:[],flavor:[],sort:null};a(),_.dispatch(p.setFilters(t)),_.dispatch(p.setInitialized(!0));function n(e,r){if(e==="sort"){t.sort=r,l(),console.log(t);return}const d=t[e];d.includes(r)?t[e]=d.filter(h=>h!==r):t[e].push(r),l(),console.log(t)}function s(){t.weight=[],t.flavor=[],t.sort=null,i(),_.dispatch(p.resetFilters()),console.log("Фильтры сброшены:",t)}function l(){const e=new URLSearchParams;t.weight.forEach(d=>e.append("weight",d)),t.flavor.forEach(d=>e.append("flavor",d)),t.sort&&e.set("sort",t.sort);const r=window.location.pathname+(e.toString()?`?${e.toString()}`:"");window.history.replaceState({},"",r)}function i(){const e=window.location.pathname;window.history.replaceState({},"",e),console.log("Фильтры сброшены:",t)}function a(){const e=new URLSearchParams(window.location.search);t.weight=e.getAll("weight"),t.flavor=e.getAll("flavor"),t.sort=e.get("sort")||null}const o=m({selector:".product-filters-bar__flavor-select",onChange:(e,r)=>n(e,r),defaultValues:[...t.flavor]}),u=m({selector:".product-filters-bar__weight-select",onChange:(e,r)=>n(e,r),defaultValues:[...t.weight]}),f=b({selector:".filter-btn_price-desktop",onClick:(e,r)=>n(e,r),defaultValue:t.sort}),c=b({selector:".filter-btn_price-mobile",onClick:(e,r)=>n(e,r),defaultValue:t.sort});B({selector:".filter-actions__apply-btn",onClick:()=>{_.dispatch(p.setFilters(t)),console.log("Applied filters:",t)}}),y({selector:".filter-actions__reset-btn",onClick:()=>{o.reset(),u.reset(),f.reset(),c.reset(),s()}})},b=({selector:t,defaultValue:n,onClick:s})=>{const l=document.querySelector(t);if(!l)return;const i=l.querySelector(".filter-btn__icon_arrowUp"),a=l.querySelector(".filter-btn__icon_arrowDown");let o=n||null;const u=()=>{o==="asc"?(i.classList.add("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active")):o==="desc"?(a.classList.add("filter-btn__icon_active"),i.classList.remove("filter-btn__icon_active")):(i.classList.remove("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active"))};return u(),l.addEventListener("click",()=>{if(o=o==="asc"?"desc":"asc",u(),s){const c=l.dataset.name;s(c,o)}}),{reset:()=>{o=null,u()}}},y=({selector:t,onClick:n})=>{const s=document.querySelector(t);s&&s.addEventListener("click",()=>{n&&n()})},B=({selector:t,onClick:n})=>{const s=document.querySelector(t);s&&s.addEventListener("click",()=>{n&&n()})},P=()=>{k()},$={catalog:"Магазин"},E=t=>{const n=document.querySelector(t);if(!n)return;const s="/".replace(/^\/|\/$/g,""),i=window.location.pathname.split("/").filter(Boolean);s&&i[0]===s&&i.shift();let a="/";const o=`
    <svg class="breadcrumbs__icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.00001 11L6.3 10.3L10.1 6.5H0V5.50002H10.1L6.3 1.7L7.00001 1.00002L12 6.00001L7.00001 11Z" fill="white" />
    </svg>
    `,u=(c,e)=>{a+=c+"/";const r=$[c]||decodeURIComponent(c.replace(/-/g," "));return e?`<li class="breadcrumbs__item">${o}<span class="breadcrumbs__link breadcrumbs__link_current">${r}</span></li>`:`<li class="breadcrumbs__item">${o}<a class="breadcrumbs__link" href="${a}" name="${r}" aria-label="${r}">${r}</a></li>`},f=`
        <ul class="breadcrumbs">
          <li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/" name="breadcrumb-link" aria-label="Главная">Главная</a></li>
          ${i.map((c,e)=>u(c,e===i.length-1)).join("")}
        </ul>
      `;n.innerHTML=f},F=()=>{E(".hero__breadcrumbs .page-container")};document.addEventListener("DOMContentLoaded",()=>{m({selector:".top-header__lang"}),F(),L(),P(),v(".lazy",{rootMargin:"200px 0px"})});
