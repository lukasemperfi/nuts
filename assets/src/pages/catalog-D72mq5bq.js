import{s as _,p as w,i as f,a as h,b as v,l as b}from"../../footer-BnmDAafM.js";import{i as L,N as S}from"../../navigation-DOgKByzg.js";import{f as y}from"../../product-list-BESQyudd.js";import{i as P}from"../../breadcrumbs-Bdl_gLzY.js";const E=()=>{B()};function B(){return L(".walnut-slider",{slidesPerView:"auto",navigation:{nextEl:".walnut-slider__next",prevEl:".walnut-slider__prev"},modules:[S]})}const F=()=>{let t={weight:[],flavor:[],sort:null};a(),_.dispatch(w.setFilters(t)),_.dispatch(w.setInitialized(!0));function r(e,o){if(e==="sort"){t.sort=o,console.log(t);return}const l=t[e];l.includes(o)?t[e]=l.filter(g=>g!==o):t[e].push(o),console.log(t)}function n(){t.weight=[],t.flavor=[],t.sort=null,c(),console.log("Фильтры сброшены:",t)}function s(){const e=new URLSearchParams;t.weight.forEach(l=>e.append("weight",l)),t.flavor.forEach(l=>e.append("flavor",l)),t.sort&&e.set("sort",t.sort);const o=window.location.pathname+(e.toString()?`?${e.toString()}`:"");window.history.replaceState({},"",o)}function c(){const e=window.location.pathname;window.history.replaceState({},"",e),console.log("Фильтры сброшены:",t)}function a(){const e=new URLSearchParams(window.location.search);t.weight=e.getAll("weight"),t.flavor=e.getAll("flavor"),t.sort=e.get("sort")||null}const i=f({selector:".product-filters-bar__flavor-select",onChange:(e,o)=>r(e,o),defaultValues:[...t.flavor]}),d=f({selector:".product-filters-bar__weight-select",onChange:(e,o)=>r(e,o),defaultValues:[...t.weight]}),p=m({selector:".filter-btn_price-desktop",onClick:(e,o)=>r(e,o),defaultValue:t.sort}),u=m({selector:".filter-btn_price-mobile",onClick:(e,o)=>r(e,o),defaultValue:t.sort});k({selector:".filter-actions__apply-btn",onClick:()=>{s(),console.log("Applied filters:",t),location.reload()}}),U({selector:".filter-actions__reset-btn",onClick:()=>{i.reset(),d.reset(),p.reset(),u.reset(),n(),location.reload()}})},m=({selector:t,defaultValue:r,onClick:n})=>{const s=document.querySelector(t);if(!s)return;const c=s.querySelector(".filter-btn__icon_arrowUp"),a=s.querySelector(".filter-btn__icon_arrowDown");let i=r||null;const d=()=>{i==="asc"?(c.classList.add("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active")):i==="desc"?(a.classList.add("filter-btn__icon_active"),c.classList.remove("filter-btn__icon_active")):(c.classList.remove("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active"))};return d(),s.addEventListener("click",()=>{if(i=i==="asc"?"desc":"asc",d(),n){const u=s.dataset.name;n(u,i)}}),{reset:()=>{i=null,d()}}},U=({selector:t,onClick:r})=>{const n=document.querySelector(t);n&&n.addEventListener("click",()=>{r&&r()})},k=({selector:t,onClick:r})=>{const n=document.querySelector(t);n&&n.addEventListener("click",()=>{r&&r()})},A=()=>{F(),y(".products__catalog")},R=()=>{P(".hero__breadcrumbs .page-container")};document.addEventListener("DOMContentLoaded",()=>{h(),f({selector:".top-header__lang"}),R(),E(),A(),v(),b(".lazy",{rootMargin:"200px 0px"})});
