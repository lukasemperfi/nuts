import{s as f,p,i as w,a as g,b as h,l as v}from"../../footer-BB2FFRQs.js";import{i as b,N as L}from"../../navigation-DOgKByzg.js";import{f as S}from"../../product-list-DvYsrkNr.js";import{i as y}from"../../breadcrumbs-BufmldSL.js";const P=()=>{E()};function E(){return b(".walnut-slider",{slidesPerView:"auto",navigation:{nextEl:".walnut-slider__next",prevEl:".walnut-slider__prev"},modules:[L]})}const B=()=>{let t={weight:[],flavor:[],sort:null};a(),f.dispatch(p.setFilters(t)),f.dispatch(p.setInitialized(!0));function i(e,o){if(e==="sort"){t.sort=o,console.log(t);return}const c=t[e];c.includes(o)?t[e]=c.filter(m=>m!==o):t[e].push(o),console.log(t)}function n(){t.weight=[],t.flavor=[],t.sort=null,l(),console.log("Фильтры сброшены:",t)}function s(){const e=new URLSearchParams;t.weight.forEach(c=>e.append("weight",c)),t.flavor.forEach(c=>e.append("flavor",c)),t.sort&&e.set("sort",t.sort);const o=window.location.pathname+(e.toString()?`?${e.toString()}`:"");window.history.replaceState({},"",o)}function l(){const e=window.location.pathname;window.history.replaceState({},"",e),console.log("Фильтры сброшены:",t)}function a(){const e=new URLSearchParams(window.location.search);t.weight=e.getAll("weight"),t.flavor=e.getAll("flavor"),t.sort=e.get("sort")||null}const r=w({selector:".product-filters-bar__weight-select",onChange:(e,o)=>i(e,o),defaultValues:[...t.weight]}),d=_({selector:".filter-btn_price-desktop",onClick:(e,o)=>i(e,o),defaultValue:t.sort}),u=_({selector:".filter-btn_price-mobile",onClick:(e,o)=>i(e,o),defaultValue:t.sort});U({selector:".filter-actions__apply-btn",onClick:()=>{s(),console.log("Applied filters:",t),location.reload()}}),F({selector:".filter-actions__reset-btn",onClick:()=>{flavorSelect.reset(),r.reset(),d.reset(),u.reset(),n(),location.reload()}})},_=({selector:t,defaultValue:i,onClick:n})=>{const s=document.querySelector(t);if(!s)return;const l=s.querySelector(".filter-btn__icon_arrowUp"),a=s.querySelector(".filter-btn__icon_arrowDown");let r=i||null;const d=()=>{r==="asc"?(l.classList.add("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active")):r==="desc"?(a.classList.add("filter-btn__icon_active"),l.classList.remove("filter-btn__icon_active")):(l.classList.remove("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active"))};return d(),s.addEventListener("click",()=>{if(r=r==="asc"?"desc":"asc",d(),n){const e=s.dataset.name;n(e,r)}}),{reset:()=>{r=null,d()}}},F=({selector:t,onClick:i})=>{const n=document.querySelector(t);n&&n.addEventListener("click",()=>{i&&i()})},U=({selector:t,onClick:i})=>{const n=document.querySelector(t);n&&n.addEventListener("click",()=>{i&&i()})},k=()=>{B(),S(".products__catalog")},A=()=>{y(".hero__breadcrumbs .page-container")};document.addEventListener("DOMContentLoaded",()=>{g(),w({selector:".top-header__lang"}),A(),P(),k(),h(),v(".lazy",{rootMargin:"200px 0px"})});
