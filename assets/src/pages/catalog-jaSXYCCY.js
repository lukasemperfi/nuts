import{i as w,N as g,s as _,b as p,a as m,f as v,l as L}from"../../lazy-loading-CkOcmiI_.js";const S=()=>{k()};function k(){return w(".walnut-slider",{slidesPerView:"auto",navigation:{nextEl:".walnut-slider__next",prevEl:".walnut-slider__prev"},modules:[g]})}const y=()=>{let t={weight:[],flavor:[],sort:null};a(),_.dispatch(p.setFilters(t)),_.dispatch(p.setInitialized(!0));function n(e,r){if(e==="sort"){t.sort=r,c(),console.log(t);return}const d=t[e];d.includes(r)?t[e]=d.filter(h=>h!==r):t[e].push(r),c(),console.log(t)}function s(){t.weight=[],t.flavor=[],t.sort=null,i(),_.dispatch(p.resetFilters()),console.log("Фильтры сброшены:",t)}function c(){const e=new URLSearchParams;t.weight.forEach(d=>e.append("weight",d)),t.flavor.forEach(d=>e.append("flavor",d)),t.sort&&e.set("sort",t.sort);const r=window.location.pathname+(e.toString()?`?${e.toString()}`:"");window.history.replaceState({},"",r)}function i(){const e=window.location.pathname;window.history.replaceState({},"",e),console.log("Фильтры сброшены:",t)}function a(){const e=new URLSearchParams(window.location.search);t.weight=e.getAll("weight"),t.flavor=e.getAll("flavor"),t.sort=e.get("sort")||null}const o=m({selector:".product-filters-bar__flavor-select",onChange:(e,r)=>n(e,r),defaultValues:[...t.flavor]}),u=m({selector:".product-filters-bar__weight-select",onChange:(e,r)=>n(e,r),defaultValues:[...t.weight]}),f=b({selector:".filter-btn_price-desktop",onClick:(e,r)=>n(e,r),defaultValue:t.sort}),l=b({selector:".filter-btn_price-mobile",onClick:(e,r)=>n(e,r),defaultValue:t.sort});P({selector:".filter-actions__apply-btn",onClick:()=>{_.dispatch(p.setFilters(t)),console.log("Applied filters:",t)}}),B({selector:".filter-actions__reset-btn",onClick:()=>{o.reset(),u.reset(),f.reset(),l.reset(),s()}})},b=({selector:t,defaultValue:n,onClick:s})=>{const c=document.querySelector(t);if(!c)return;const i=c.querySelector(".filter-btn__icon_arrowUp"),a=c.querySelector(".filter-btn__icon_arrowDown");let o=n||null;const u=()=>{o==="asc"?(i.classList.add("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active")):o==="desc"?(a.classList.add("filter-btn__icon_active"),i.classList.remove("filter-btn__icon_active")):(i.classList.remove("filter-btn__icon_active"),a.classList.remove("filter-btn__icon_active"))};return u(),c.addEventListener("click",()=>{if(o=o==="asc"?"desc":"asc",u(),s){const l=c.dataset.name;s(l,o)}}),{reset:()=>{o=null,u()}}},B=({selector:t,onClick:n})=>{const s=document.querySelector(t);s&&s.addEventListener("click",()=>{n&&n()})},P=({selector:t,onClick:n})=>{const s=document.querySelector(t);s&&s.addEventListener("click",()=>{n&&n()})},$=()=>{y(),v(".products__catalog")},E={catalog:"Магазин"},F=t=>{const n=document.querySelector(t);if(!n)return;const s="/nuts/".replace(/^\/|\/$/g,""),i=window.location.pathname.split("/").filter(Boolean);s&&i[0]===s&&i.shift();let a="/";const o=`
    <svg class="breadcrumbs__icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.00001 11L6.3 10.3L10.1 6.5H0V5.50002H10.1L6.3 1.7L7.00001 1.00002L12 6.00001L7.00001 11Z" fill="white" />
    </svg>
    `,u=(l,e)=>{a+=l+"/";const r=E[l]||decodeURIComponent(l.replace(/-/g," "));return e?`<li class="breadcrumbs__item">${o}<span class="breadcrumbs__link breadcrumbs__link_current">${r}</span></li>`:`<li class="breadcrumbs__item">${o}<a class="breadcrumbs__link" href="${a}" name="${r}" aria-label="${r}">${r}</a></li>`},f=`
        <ul class="breadcrumbs">
          <li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/" name="breadcrumb-link" aria-label="Главная">Главная</a></li>
          ${i.map((l,e)=>u(l,e===i.length-1)).join("")}
        </ul>
      `;n.innerHTML=f},U=()=>{F(".hero__breadcrumbs .page-container")};document.addEventListener("DOMContentLoaded",()=>{m({selector:".top-header__lang"}),U(),S(),$(),L(".lazy",{rootMargin:"200px 0px"})});
