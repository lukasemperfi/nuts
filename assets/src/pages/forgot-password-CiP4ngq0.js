import{c as f,i as _,a as E,b as R,l as F}from"../../footer-CND1tpeV.js";import{i as w}from"../../breadcrumbs-CDZIjPaA.js";import{J as c,R as d,E as O,P,c as p,r as D}from"../../rules-DKlY0A5N.js";const y=()=>{w(".login-page-breadcrumbs__container","breadcrumbs_color_muted")},s={FORM:"#send-password-to-email-form",EMAIL:"#send-password-to-email-form__email"};function M(){const e={errorFieldCssClass:"form-field__input_error",errorLabelCssClass:"form-field__error",focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0,errorFieldStyle:{},errorLabelStyle:{}},r=new c(s.FORM,e);return r.addField(s.EMAIL,[d,O]),r}const o={FORM:"#password-reset-form",NEW_PASSWORD:"#password-reset-form__new-password",CONFIRM_NEW_PASSWORD:"#password-reset-form__confirm-new-password"},W={validator:(e,r)=>{if(r[o.NEW_PASSWORD]&&r[o.NEW_PASSWORD].elem){const t=r[o.NEW_PASSWORD].elem.value;return e===t}return!0},errorMessage:"Пароли должны быть одинаковыми"};function C(){const e={errorFieldCssClass:"form-field__input_error",errorLabelCssClass:"form-field__error",focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0,errorFieldStyle:{},errorLabelStyle:{}},r=new c(o.FORM,e);return r.addField(o.NEW_PASSWORD,[d,P]),r.addField(o.CONFIRM_NEW_PASSWORD,[d,W]),r}let L="/nuts/";const b=()=>{const e=p("Пароль изменен!"),r=M(),t=C();r.onSuccess(m),t.onSuccess(u);async function m(a){a.preventDefault();const n=document.querySelector(s.FORM),i=new FormData(n);Object.fromEntries(i.entries()),e.show(),await l(2e3)?(e.hide(),g(),v()):(e.hide(),r.showErrors({[s.EMAIL]:"Неверный email"}))}async function u(a){a.preventDefault();const n=document.querySelector(o.FORM),i=new FormData(n);Object.fromEntries(i.entries()),e.show(),await l(2e3)?(e.hide(),e.success(),D(`${L}login/`,2e3)):(e.hide(),t.showErrors({[o.NEW_PASSWORD]:"Новый пароль должен отличаться от старого"}))}};function A(e){return new Promise(r=>setTimeout(r,e))}async function l(e){return await A(e),Math.random()<.5}function g(){const e=document.querySelector(s.FORM);e.style.display="none"}function v(){const e=document.querySelector(o.FORM);e.style.display="block"}document.addEventListener("DOMContentLoaded",async()=>{await f(),_({selector:".top-header__lang"}),E(),y(),b(),R(),F(".lazy",{rootMargin:"200px 0px"})});
