import{d as c,s as m,A as s,c as u,i as E,a as f,b as L,l as S}from"../../footer-CND1tpeV.js";import{i as _}from"../../breadcrumbs-CDZIjPaA.js";import{J as g,R as t,E as F,P as R,c as b,r as D}from"../../rules-DKlY0A5N.js";const O=()=>{_(".login-page-breadcrumbs__container","breadcrumbs_color_muted")},e={FORM:"#login-form",EMAIL:"#login-email",PASSWORD:"#login-password"};function p(){const o={errorFieldCssClass:"form-field__input_error",errorLabelCssClass:"form-field__error",focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0,errorFieldStyle:{},errorLabelStyle:{}},r=new g(e.FORM,o);return r.addField(e.EMAIL,[t,F]).addField(e.PASSWORD,[t,R]),r}let A="/nuts/";const y=()=>{const o=b("Вы успешно вошли в систему!"),r=p();r.onSuccess(async a=>{a.preventDefault();const i=document.querySelector(e.FORM),n=new FormData(i),{email:l,password:d}=Object.fromEntries(n.entries());await c(l,d)}),m.subscribe("auth",async a=>{a.status===s.LOADING&&o.show(),a.status===s.SUCCEEDED&&(o.success(),D(A,2e3)),a.status===s.FAILED&&(r.showErrors({[e.EMAIL]:""}),r.showErrors({[e.PASSWORD]:"Неверный пароль или email"}),o.hide())})};document.addEventListener("DOMContentLoaded",async()=>{await u(),E({selector:".top-header__lang"}),f(),O(),y(),L(),S(".lazy",{rootMargin:"200px 0px"})});
