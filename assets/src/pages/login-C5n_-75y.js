import{h as d,s as u,A as a,c as m,i as E,a as f,b as L,l as S}from"../../footer-B8T5AYVf.js";import{i as _}from"../../breadcrumbs-Bdl_gLzY.js";import{J as g,R as t,E as F,P as R,c as b,r as D}from"../../rules-8moWvT5A.js";const O=()=>{_(".login-page-breadcrumbs__container","breadcrumbs_color_muted")},e={FORM:"#login-form",EMAIL:"#login-email",PASSWORD:"#login-password"};function p(){const s={errorFieldCssClass:"form-field__input_error",errorLabelCssClass:"form-field__error",focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0,errorFieldStyle:{},errorLabelStyle:{}},r=new g(e.FORM,s);return r.addField(e.EMAIL,[t,F]).addField(e.PASSWORD,[t,R]),r}let A="/nuts/";const y=()=>{const s=b({successText:"Вы успешно вошли в систему!"}),r=p();r.onSuccess(async o=>{o.preventDefault();const i=document.querySelector(e.FORM),n=new FormData(i),{email:l,password:c}=Object.fromEntries(n.entries());await d(l,c)}),u.subscribe("auth",async o=>{o.status===a.LOADING&&s.show(),o.status===a.SUCCEEDED&&(s.success(),D(A,2e3)),o.status===a.FAILED&&(r.showErrors({[e.EMAIL]:""}),r.showErrors({[e.PASSWORD]:"Неверный пароль или email"}),s.hide())})};document.addEventListener("DOMContentLoaded",async()=>{await m(),E({selector:".top-header__lang"}),f(),O(),y(),L(),S(".lazy",{rootMargin:"200px 0px"})});
