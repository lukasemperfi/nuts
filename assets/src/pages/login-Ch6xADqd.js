import{k as d,s as m,A as a,c as u,i as E,a as f,b as L,l as S}from"../../footer-kwW1Dzn6.js";import{i as _}from"../../breadcrumbs-CCIHsRy6.js";import{J as g,R as t,E as F,P as R,c as b}from"../../rules-BILaquOo.js";import{r as p}from"../../redirect-7MlKBWST.js";const D=()=>{_(".login-page-breadcrumbs__container","breadcrumbs_color_muted")},e={FORM:"#login-form",EMAIL:"#login-email",PASSWORD:"#login-password"};function O(){const o={errorFieldCssClass:"form-field__input_error",errorLabelCssClass:"form-field__error",focusInvalidField:!0,lockForm:!0,validateBeforeSubmitting:!0,errorFieldStyle:{},errorLabelStyle:{}},r=new g(e.FORM,o);return r.addField(e.EMAIL,[t,F]).addField(e.PASSWORD,[t,R]),r}let A="/nuts/";const y=()=>{const o=b({successText:"Вы успешно вошли в систему!"}),r=O();r.onSuccess(async s=>{s.preventDefault();const i=document.querySelector(e.FORM),n=new FormData(i),{email:l,password:c}=Object.fromEntries(n.entries());await d(l,c)}),m.subscribe("auth",async s=>{s.status===a.LOADING&&o.show(),s.status===a.SUCCEEDED&&(o.success(),p(A,2e3)),s.status===a.FAILED&&(r.showErrors({[e.EMAIL]:""}),r.showErrors({[e.PASSWORD]:"Неверный пароль или email"}),o.hide())})};document.addEventListener("DOMContentLoaded",async()=>{await u(),E({selector:".top-header__lang"}),f(),D(),y(),L(),S(".lazy",{rootMargin:"200px 0px"})});
